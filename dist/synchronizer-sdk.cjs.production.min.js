"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t,r=require("@sushiswap/core-sdk"),n=require("react"),o=e(n),a=require("lodash"),u=require("@ethersproject/address"),i=require("@reduxjs/toolkit"),c=require("@reduxjs/toolkit/query/react"),s=require("react-redux"),l=e(require("bignumber.js")),f=require("@ethersproject/bignumber"),p=require("@ethersproject/contracts"),d=require("@ethersproject/providers");(t=exports.SupportedChainId||(exports.SupportedChainId={}))[t.FANTOM=250]="FANTOM";var h,v,m,y,x,g,O,b,S=[exports.SupportedChainId.FANTOM],w=({}[exports.SupportedChainId.FANTOM]="0x22D4cF72C45F8198CfbF4B568dBdB5A85e8DC0B5",(h={})[exports.SupportedChainId.FANTOM]="0xDE12c7959E1a72bbe8a5f7A1dc8f8EeF9Ab011B3",h),R=((v={})[exports.SupportedChainId.FANTOM]="0x71EB0bCFeB9610a79af007531aEeeE7848e76E71",v),E=((m={})[exports.SupportedChainId.FANTOM]="0x6796a6b39f2c8FF2bEfa223aC6eeD13a4d693ba4",m),T=((y={})[exports.SupportedChainId.FANTOM]="0x570d710d9f20599551246ec24d8a8ccffeb57ccf",y),C=((x={})[exports.SupportedChainId.FANTOM]="0x8e6f8844b73dae005b02fd8776ee4719e7d5eb01",x),F=new URL("https://oracle1.deus.finance"),I=((g={})[exports.SupportedChainId.FANTOM]="fantom",g);function k(e){return new r.Percent(r.JSBI.BigInt(~~(1e4*e)),1e6).multiply(100)}({})[exports.SupportedChainId.FANTOM]="fantom",(O=exports.Direction||(exports.Direction={})).LONG="LONG",O.SHORT="SHORT",(b=exports.Sector||(exports.Sector={})).STOCKS="STOCKS",b.CRYPTO="CRYPTO",b.FOREX="FOREX",b.COMMODITIES="COMMODITIES",b.MISC="MISC";var L=i.createSlice({name:"application",initialState:{forceRefresh:0},reducers:{updateForceRefresh:function(e,t){e.forceRefresh=t.payload}}}).reducer;function N(){return fe((function(e){return e.application}))}function M(e,t,r,n,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function A(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){M(a,n,o,u,i,"next",e)}function i(e){M(a,n,o,u,i,"throw",e)}u(void 0)}))}}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var j,D,G=(function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",u=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=Object.create((t&&t.prototype instanceof f?t:f).prototype),a=new w(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var u=r.delegate;if(u){var i=O(u,r);if(i){if(i===l)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l={};function f(){}function p(){}function d(){}var h={};i(h,o,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(R([])));m&&m!==t&&r.call(m,o)&&(h=m);var y=d.prototype=f.prototype=Object.create(h);function x(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var n;this._invoke=function(o,a){function u(){return new t((function(n,u){!function n(o,a,u,i){var c=s(e[o],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,u,i)}),(function(e){n("throw",e,u,i)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return n("throw",e,u,i)}))}i(c.arg)}(o,a,n,u)}))}return n=n?n.then(u,u):u()}}function O(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function R(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=d,i(y,"constructor",d),i(d,"constructor",p),p.displayName=i(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,i(e,u,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},x(g.prototype),i(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var u=new g(c(t,r,n,o),a);return e.isGeneratorFunction(r)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},x(y),i(y,u,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=R,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return u.type="throw",u.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(i&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:R(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(D={exports:{}}),D.exports),K=function(){var e=A(G.mark((function e(t,r){var n;return G.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r={cache:"no-cache"}),e.prev=1,e.next=4,fetch(t,r);case 4:if(!(n=e.sent).ok){e.next=11;break}return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 11:throw new Error(n.statusText);case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(1),console.error("Error fetching "+t+": ",e.t0),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,r){return e.apply(this,arguments)}}();!function(e){e.OK="OK",e.LOADING="LOADING",e.ERROR="ERROR"}(j||(j={}));var q,_={status:j.LOADING,conducted:{}},U=i.createAsyncThunk("conducted/fetchConducted",A(G.mark((function e(){return G.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled(Object.entries(I).map(function(){var e=A(G.mark((function e(t){var r,n,o,a;return G.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t[0],n=new URL("/"+t[1]+"/conducted.json",F),o=n.href,e.next=4,K(o);case 4:return a=e.sent,e.abrupt("return",{chainId:Number(r),result:a.tokens});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent.reduce((function(e,t){return"fulfilled"!==t.status||(e[t.value.chainId]=t.value.result),e}),{}));case 4:case"end":return e.stop()}}),e)})))),B=i.createSlice({name:"conducted",initialState:_,reducers:{},extraReducers:function(e){e.addCase(U.pending,(function(e){e.status=j.LOADING})).addCase(U.fulfilled,(function(e,t){var r=t.payload;e.status=j.OK,e.conducted=r})).addCase(U.rejected,(function(){return console.log("Unable to fetch conducted"),P({},_,{status:j.ERROR})}))}}).reducer;!function(e){e.OK="OK",e.LOADING="LOADING",e.ERROR="ERROR"}(q||(q={}));var Y,X,H,z={status:q.LOADING,details:{}},J=i.createAsyncThunk("details/fetchDetails",A(G.mark((function e(){var t,r;return G.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URL("/registrar-detail.json",F),r=t.href,e.next=3,K(r);case 3:return e.abrupt("return",Object.entries(e.sent).reduce((function(e,t){var r=t[1];return e[t[0]]={name:r.name,sector:"stock"===r.sector?exports.Sector.STOCKS:"crypto"===r.sector?exports.Sector.CRYPTO:exports.Sector.FOREX,symbol:r.symbol,shortSymbol:r.short_symbol,longSymbol:r.long_symbol},e}),{}));case 5:case"end":return e.stop()}}),e)})))),Q=i.createSlice({name:"details",initialState:z,reducers:{},extraReducers:function(e){e.addCase(J.pending,(function(e){e.status=q.LOADING})).addCase(J.fulfilled,(function(e,t){var r=t.payload;e.status=q.OK,e.details=r})).addCase(J.rejected,(function(){return console.log("Unable to fetch details"),P({},z,{status:q.ERROR})}))}}).reducer;!function(e){e.OK="OK",e.LOADING="LOADING",e.ERROR="ERROR"}(H||(H={}));var V,W={status:H.LOADING,partnerFee:(Y={},Y[exports.Sector.STOCKS]="0",Y[exports.Sector.CRYPTO]="0",Y[exports.Sector.FOREX]="0",Y[exports.Sector.COMMODITIES]="0",Y[exports.Sector.MISC]="0",Y),platformFee:(X={},X[exports.Sector.STOCKS]="0",X[exports.Sector.CRYPTO]="0",X[exports.Sector.FOREX]="0",X[exports.Sector.COMMODITIES]="0",X[exports.Sector.MISC]="0",X)},Z=i.createSlice({name:"fees",initialState:W,reducers:{updatePlatformFee:function(e,t){e.platformFee=P({},e.platformFee,t.payload)},updatePartnerFee:function(e,t){e.partnerFee=P({},e.partnerFee,t.payload)}}}),$=Z.actions,ee=Z.reducer,te=$.updatePlatformFee,re=$.updatePartnerFee;!function(e){e.OK="OK",e.LOADING="LOADING",e.ERROR="ERROR"}(V||(V={}));var ne,oe={status:V.LOADING,quotes:{}},ae=i.createAsyncThunk("quotes/fetchQuotes",A(G.mark((function e(){return G.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled(Object.entries(I).map(function(){var e=A(G.mark((function e(t){var r,n,o,a;return G.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t[0],n=new URL("/"+t[1]+"/price.json",F),o=n.href,e.next=4,K(o);case 4:return a=Object.entries(e.sent).reduce((function(e,t){var r,n,o,a,u=t[1],i=null!=(r=null==(n=u.Long)?void 0:n.price)?r:0,c=null!=(o=null==(a=u.Short)?void 0:a.price)?o:0;return e[t[0]]={long:{price:i.toFixed(6),open:!!i},short:{price:c.toFixed(6),open:!!c}},e}),{}),e.abrupt("return",{chainId:Number(r),result:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent.reduce((function(e,t){return"fulfilled"!==t.status||(e[t.value.chainId]=t.value.result),e}),{}));case 4:case"end":return e.stop()}}),e)})))),ue=i.createSlice({name:"quotes",initialState:oe,reducers:{},extraReducers:function(e){e.addCase(ae.pending,(function(e){e.status=V.LOADING})).addCase(ae.fulfilled,(function(e,t){var r=t.payload;e.status=V.OK,e.quotes=r})).addCase(ae.rejected,(function(){return console.log("Unable to fetch quotes"),P({},oe,{status:V.ERROR})}))}}).reducer;!function(e){e.OK="OK",e.LOADING="LOADING",e.ERROR="ERROR"}(ne||(ne={}));var ie={status:ne.LOADING,signatures:{}},ce=i.createAsyncThunk("signatures/fetchSignatures",A(G.mark((function e(){return G.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled(Object.entries(I).map(function(){var e=A(G.mark((function e(t){var r,n,o,a;return G.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t[0],n=new URL("/"+t[1]+"/signatures.json",F),o=n.href,e.next=4,K(o);case 4:return a=e.sent,e.abrupt("return",{chainId:Number(r),result:a});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent.reduce((function(e,t){return"fulfilled"!==t.status||(e[t.value.chainId]=t.value.result),e}),{}));case 4:case"end":return e.stop()}}),e)})))),se=i.configureStore({reducer:{application:L,conducted:B,details:Q,fees:ee,quotes:ue,signatures:i.createSlice({name:"signatures",initialState:ie,reducers:{},extraReducers:function(e){e.addCase(ce.pending,(function(e){e.status=ne.LOADING})).addCase(ce.fulfilled,(function(e,t){var r=t.payload;e.status=ne.OK,e.signatures=r})).addCase(ce.rejected,(function(){return console.log("Unable to fetch signatures"),P({},ie,{status:ne.ERROR})}))}}).reducer},middleware:function(e){return e({thunk:!0})}});c.setupListeners(se.dispatch);var le=function(){return s.useDispatch()},fe=s.useSelector;function pe(){return fe((function(e){return e.fees}))}function de(){var e=pe(),t=e.platformFee,r=e.partnerFee;return n.useCallback((function(e){return new l(t[e]).plus(r[e]).div(1e18)}),[t,r])}function he(e,t){return e.ticker<t.ticker?-1:e.ticker>t.ticker?1:0}function ve(e){var t=fe((function(e){return e.conducted})).conducted,o=fe((function(e){return e.quotes})).quotes,a=fe((function(e){return e.signatures})).signatures,i=fe((function(e){return e.details})).details,c=de(),s=n.useMemo((function(){return[c(exports.Sector.STOCKS).toNumber(),c(exports.Sector.CRYPTO).toNumber(),c(exports.Sector.FOREX).toNumber()]}),[c]),l=s[0],f=s[1],p=s[2];return n.useMemo((function(){return e&&t[e]&&o[e]&&a[e]&&i?t[e].map((function(t){var n=t.id,c=t.long,s=t.short,d=o[e][n],h=a[e][c],v=a[e][s],m=i[n];if(!(m&&d&&d.long&&d.short))return null;var y=m.sector===exports.Sector.STOCKS?l:m.sector===exports.Sector.CRYPTO?f:p;return{id:n,long:{id:n,chainId:e,ticker:m.symbol,name:m.name,sector:m.sector,direction:exports.Direction.LONG,contract:u.getAddress(c),sibling:s,symbol:m.longSymbol,price:d.long.price,fee:k(y),open:!!h,token:new r.Token(e,u.getAddress(c),18,m.symbol,m.name)},short:{id:n,chainId:e,ticker:m.symbol,name:m.name,sector:m.sector,direction:exports.Direction.SHORT,contract:u.getAddress(s),sibling:c,symbol:m.shortSymbol,price:d.short.price,fee:k(y),open:!!v,token:new r.Token(e,u.getAddress(s),18,m.symbol,m.name)}}})).filter((function(e){return e})):[]}),[e,i,t,o,a,l,f,p])}function me(e){var t=ve(e);return n.useMemo((function(){return t.reduce((function(e,t){return e.push.apply(e,[t.long,t.short]),e}),[]).sort(he)}),[t])}var ye=i.createAction("application/updateForceRefresh");function xe(){var e=le();return n.useEffect((function(){e(U())}),[e]),null}function ge(){var e=le();return n.useEffect((function(){e(J())}),[e]),null}var Oe,be=[{inputs:[{internalType:"address",name:"platform_",type:"address"},{internalType:"uint256[3]",name:"platformFee_",type:"uint256[3]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256[3]",name:"partnerFee",type:"uint256[3]"}],name:"PartnerAdded",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"stockFee",type:"uint256"},{internalType:"uint256",name:"cryptoFee",type:"uint256"},{internalType:"uint256",name:"forexFee",type:"uint256"}],name:"addPartner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isPartner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"partnerFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"platform",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"platformFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"scale",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Se=((Oe={})[exports.SupportedChainId.FANTOM]=new d.JsonRpcProvider("https://rpc.ftm.tools"),Oe);function we(e){var t=n.useMemo((function(){return e&&e in E?E[e]:E[250]}),[e]);return function(e,t,r){var o=function(e){return n.useMemo((function(){return e&&e in Se?Se[e]:Se[250]}),[e])}(e);return n.useMemo((function(){return new p.Contract(t,r,o)}),[t,r,o])}(e,t,be)}var Re=f.BigNumber.from("0"),Ee=[Re,Re,Re];function Te(e){var t=e.chainId,r=e.partnerId,o=le(),a=we(t),u=n.useState(Ee),i=u[0],c=u[1],s=n.useState(Ee),l=s[0],f=s[1],p=n.useMemo((function(){return!!t&&Object.values(S).includes(t)}),[t]),d=n.useMemo((function(){return p?[[r,0],[r,1],[r,2]]:[]}),[p,r]),h=n.useMemo((function(){return p?[0,1,2]:[]}),[p]);return n.useEffect((function(){var e=function(){var e=A(G.mark((function e(){var t;return G.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(d.map((function(e){return a.partnerFee.apply(a,e)})));case 3:(t=e.sent).length&&c(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Unable to fetch PartnerFees: ",e.t0),c(Ee);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();a&&d.length&&e()}),[d,a]),n.useEffect((function(){var e=function(){var e=A(G.mark((function e(){var t;return G.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(h.map((function(e){return a.platformFee(e)})));case 3:(t=e.sent).length&&f(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Unable to fetch PlatformFees: ",e.t0),c(Ee);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();a&&h.length&&e()}),[h,a]),n.useEffect((function(){var e,t,r,n,a,u,c=i[0],s=i[1],f=i[2],p=l[0],d=l[1],h=l[2];c&&o(re(((e={})[exports.Sector.STOCKS]=c.toString(),e))),s&&o(re(((t={})[exports.Sector.CRYPTO]=s.toString(),t))),f&&o(re(((r={})[exports.Sector.FOREX]=f.toString(),r))),p&&o(te(((n={})[exports.Sector.STOCKS]=p.toString(),n))),d&&o(te(((a={})[exports.Sector.CRYPTO]=d.toString(),a))),h&&o(te(((u={})[exports.Sector.FOREX]=h.toString(),u)))}),[o,l,i]),null}function Ce(){var e=le(),t=N().forceRefresh;return n.useEffect((function(){var t=setInterval((function(){return e(ae())}),6e4);return e(ae()),function(){return clearInterval(t)}}),[e]),n.useEffect((function(){t&&(console.info("Forcing a quote refresh"),e(ae()))}),[t]),null}function Fe(){var e=le(),t=N().forceRefresh;return n.useEffect((function(){e(ce())}),[e]),n.useEffect((function(){t&&(console.info("Forcing a signatures refresh"),e(ce()))}),[t]),null}function Ie(e){var t=e.chainId,r=e.partnerId;return o.createElement(o.Fragment,null,o.createElement(xe,null),o.createElement(ge,null),o.createElement(Te,{chainId:t,partnerId:r}),o.createElement(Ce,null),o.createElement(Fe,null))}var ke={Collateral:w,Conductor:T,PartnerManager:E,RoleChecker:C,Synchronizer:R};Object.defineProperty(exports,"Percent",{enumerable:!0,get:function(){return r.Percent}}),Object.defineProperty(exports,"Token",{enumerable:!0,get:function(){return r.Token}}),exports.MuonClient=!0,exports.SynchronizerProvider=function(e){var t=e.children;return o.createElement(s.Provider,{store:se},o.createElement(o.Fragment,null,o.createElement(Ie,{chainId:e.chainId,partnerId:e.partnerId}),t))},exports.addresses=ke,exports.useForceRefresh=function(){var e=N().forceRefresh,t=le();return n.useCallback((function(){t(ye(e+1))}),[t,e,ye])},exports.usePartnerFeeCallback=function(){var e=pe().partnerFee;return n.useCallback((function(t){return new l(e[t]).div(1e18)}),[e])},exports.usePlatformFeeCallback=function(){var e=pe().platformFee;return n.useCallback((function(t){return new l(e[t]).div(1e18)}),[e])},exports.useRegistrarByContract=function(e,t){var r=me(t);return n.useMemo((function(){if(e){var t=a.find(r,(function(t){return t.contract.toUpperCase()===e.toUpperCase()}));return null!=t?t:void 0}}),[e,r])},exports.useRegistrarPairs=ve,exports.useRegistrarTokenMap=function(e){var t=me(e);return n.useMemo((function(){return t.reduce((function(e,t){return e[t.contract]=t.token,e}),{})}),[t])},exports.useRegistrarTokens=function(e){var t=me(e);return n.useMemo((function(){return t.map((function(e){return e.token}))}),[t])},exports.useRegistrars=me,exports.useTotalFeeCallback=de;
//# sourceMappingURL=synchronizer-sdk.cjs.production.min.js.map
