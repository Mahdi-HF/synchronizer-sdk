"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t,r=require("@sushiswap/core-sdk"),n=e(require("axios")),o=require("@ethersproject/address"),a=require("react"),u=e(a),i=require("lodash"),c=require("@reduxjs/toolkit"),s=require("@reduxjs/toolkit/query/react"),l=require("react-redux"),f=e(require("bignumber.js")),p=require("@ethersproject/bignumber"),d=require("@ethersproject/contracts"),h=require("@ethersproject/providers");(t=exports.SupportedChainId||(exports.SupportedChainId={}))[t.FANTOM=250]="FANTOM";var v,m,y,g,x,b=[exports.SupportedChainId.FANTOM],O=((v={})[exports.SupportedChainId.FANTOM]="0xDE12c7959E1a72bbe8a5f7A1dc8f8EeF9Ab011B3",v),w=((m={})[exports.SupportedChainId.FANTOM]="0x71EB0bCFeB9610a79af007531aEeeE7848e76E71",m),S=((y={})[exports.SupportedChainId.FANTOM]="0x6796a6b39f2c8FF2bEfa223aC6eeD13a4d693ba4",y),R=((g={})[exports.SupportedChainId.FANTOM]="0x570d710d9f20599551246ec24d8a8ccffeb57ccf",g),E=((x={})[exports.SupportedChainId.FANTOM]="0x8e6f8844b73dae005b02fd8776ee4719e7d5eb01",x);function k(e,t,r,n,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function T(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){k(a,n,o,u,i,"next",e)}function i(e){k(a,n,o,u,i,"throw",e)}u(void 0)}))}}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var C,F,P,L=(function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",u=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=Object.create((t&&t.prototype instanceof f?t:f).prototype),a=new S(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var u=r.delegate;if(u){var i=b(u,r);if(i){if(i===l)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l={};function f(){}function p(){}function d(){}var h={};i(h,o,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(R([])));m&&m!==t&&r.call(m,o)&&(h=m);var y=d.prototype=f.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){var n;this._invoke=function(o,a){function u(){return new t((function(n,u){!function n(o,a,u,i){var c=s(e[o],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,u,i)}),(function(e){n("throw",e,u,i)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return n("throw",e,u,i)}))}i(c.arg)}(o,a,n,u)}))}return n=n?n.then(u,u):u()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=d,i(y,"constructor",d),i(d,"constructor",p),p.displayName=i(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,i(e,u,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),i(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var u=new x(c(t,r,n,o),a);return e.isGeneratorFunction(r)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},g(y),i(y,u,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=R,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return u.type="throw",u.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(i&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),w(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:R(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(P={exports:{}}),P.exports),A=new URL("https://oracle1.deus.finance"),M=((C={})[exports.SupportedChainId.FANTOM]="fantom",C),N=((F={})[exports.SupportedChainId.FANTOM]="fantom",F);function j(e){return e instanceof Error}var _,D,G=function(){function e(e,t){this._APP_ID="synchronizer",this._APP_METHOD="signature",this._api=n.create({baseURL:null!=e?e:"https://node-balancer.muon.net/v1",timeout:2e4}),this.nSign=null!=t?t:2}var t=e.prototype;return t._getChecksumAddress=function(e){try{return o.getAddress(e)}catch(e){return!1}},t._getRequestParams=function(e,t,r){if(!e)return new Error("Param `contract` is missing.");if(!t)return new Error("Param `action` is missing.");if(!r)return new Error("Param `chainId` is missing.");var n=this._getChecksumAddress(e);return n?"buy"!==t&&"sell"!==t?new Error("Param `action` is not supported. Try using buy or sell."):b.includes(r)?{tokenId:n,action:t,chain:N[r],useMultiplier:!1}:new Error("Param `chainId` is not supported."):new Error("Param `contract` is not a valid address.")},t._makeRequest=function(){var e=T(L.mark((function e(t){var r;return L.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api({method:"post",url:"/",data:{app:this._APP_ID,method:this._APP_METHOD,nSign:this.nSign,params:t}});case 2:if(200===(r=e.sent).status){e.next=5;break}return e.abrupt("return",new Error("Unable to reach the Muon Network."));case 5:return e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getSignatures=function(){var e=T(L.mark((function e(t,r,n){var o,a,u,i,c,s,l,f,p,d,h,v;return L.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!j(s=this._getRequestParams(t,r,n))){e.next=4;break}throw new Error(s.message);case 4:return console.info("Requesting data from Muon: ",s),e.next=7,this._makeRequest(s);case 7:if(!j(l=e.sent)){e.next=10;break}throw new Error(l.message);case 10:if(console.info("Response from Muon: ",l),!("error"in l)){e.next=15;break}throw new Error(l.error);case 15:if(l.success&&l.result.confirmed){e.next=17;break}throw new Error("An unknown Muon error has occured");case 17:return p="0x"+(null==(f=l.result)||null==(o=f.cid)?void 0:o.substring(1)),d=null==f||null==(a=f.signatures[0])?void 0:a.signature,h=null==f||null==(u=f.signatures[0])?void 0:u.owner,v=null==f||null==(i=f.data)||null==(c=i.init)?void 0:c.nonceAddress,e.abrupt("return",{success:!0,data:{response:l,calldata:{price:f.data.result.price,expireBlock:f.data.result.expireBlock,reqId:p,sigs:[{signature:d,owner:h,nonce:v}]}}});case 26:return e.prev=26,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{success:!1,error:(m=e.t0,m instanceof Error?m.message:String(m))});case 30:case"end":return e.stop()}var m}),e,this,[[0,26]])})));return function(t,r,n){return e.apply(this,arguments)}}(),e}();function q(e){return new r.Percent(r.JSBI.BigInt(~~(1e4*e)),1e6).multiply(100)}(_=exports.Direction||(exports.Direction={})).LONG="LONG",_.SHORT="SHORT",(D=exports.Sector||(exports.Sector={})).STOCKS="STOCKS",D.CRYPTO="CRYPTO",D.FOREX="FOREX",D.COMMODITIES="COMMODITIES",D.MISC="MISC";var K=c.createSlice({name:"application",initialState:{forceRefresh:0},reducers:{updateForceRefresh:function(e,t){e.forceRefresh=t.payload}}}).reducer;function U(){return me((function(e){return e.application}))}var Y,B=function(){var e=T(L.mark((function e(t,r){var n;return L.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r={cache:"no-cache"}),e.prev=1,e.next=4,fetch(t,r);case 4:if(!(n=e.sent).ok){e.next=11;break}return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 11:throw new Error(n.statusText);case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(1),console.error("Error fetching "+t+": ",e.t0),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,r){return e.apply(this,arguments)}}();!function(e){e.OK="OK",e.LOADING="LOADING",e.ERROR="ERROR"}(Y||(Y={}));var X,H={status:Y.LOADING,conducted:{}},z=c.createAsyncThunk("conducted/fetchConducted",T(L.mark((function e(){return L.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled(Object.entries(M).map(function(){var e=T(L.mark((function e(t){var r,n,o,a;return L.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t[0],n=new URL("/"+t[1]+"/conducted.json",A),o=n.href,e.next=4,B(o);case 4:return a=e.sent,e.abrupt("return",{chainId:Number(r),result:a.tokens});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent.reduce((function(e,t){return"fulfilled"!==t.status||(e[t.value.chainId]=t.value.result),e}),{}));case 4:case"end":return e.stop()}}),e)})))),J=c.createSlice({name:"conducted",initialState:H,reducers:{},extraReducers:function(e){e.addCase(z.pending,(function(e){e.status=Y.LOADING})).addCase(z.fulfilled,(function(e,t){var r=t.payload;e.status=Y.OK,e.conducted=r})).addCase(z.rejected,(function(){return console.log("Unable to fetch conducted"),I({},H,{status:Y.ERROR})}))}}).reducer;!function(e){e.OK="OK",e.LOADING="LOADING",e.ERROR="ERROR"}(X||(X={}));var Q,V,W,Z={status:X.LOADING,details:{}},$=c.createAsyncThunk("details/fetchDetails",T(L.mark((function e(){var t,r;return L.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URL("/registrar-detail.json",A),r=t.href,e.next=3,B(r);case 3:return e.abrupt("return",Object.entries(e.sent).reduce((function(e,t){var r=t[1];return e[t[0]]={name:r.name,sector:"stock"===r.sector?exports.Sector.STOCKS:"crypto"===r.sector?exports.Sector.CRYPTO:exports.Sector.FOREX,symbol:r.symbol,shortSymbol:r.short_symbol,longSymbol:r.long_symbol},e}),{}));case 5:case"end":return e.stop()}}),e)})))),ee=c.createSlice({name:"details",initialState:Z,reducers:{},extraReducers:function(e){e.addCase($.pending,(function(e){e.status=X.LOADING})).addCase($.fulfilled,(function(e,t){var r=t.payload;e.status=X.OK,e.details=r})).addCase($.rejected,(function(){return console.log("Unable to fetch details"),I({},Z,{status:X.ERROR})}))}}).reducer;!function(e){e.OK="OK",e.LOADING="LOADING",e.ERROR="ERROR"}(W||(W={}));var te,re={status:W.LOADING,partnerFee:(Q={},Q[exports.Sector.STOCKS]="0",Q[exports.Sector.CRYPTO]="0",Q[exports.Sector.FOREX]="0",Q[exports.Sector.COMMODITIES]="0",Q[exports.Sector.MISC]="0",Q),platformFee:(V={},V[exports.Sector.STOCKS]="0",V[exports.Sector.CRYPTO]="0",V[exports.Sector.FOREX]="0",V[exports.Sector.COMMODITIES]="0",V[exports.Sector.MISC]="0",V)},ne=c.createSlice({name:"fees",initialState:re,reducers:{updatePlatformFee:function(e,t){e.platformFee=I({},e.platformFee,t.payload)},updatePartnerFee:function(e,t){e.partnerFee=I({},e.partnerFee,t.payload)}}}),oe=ne.actions,ae=ne.reducer,ue=oe.updatePlatformFee,ie=oe.updatePartnerFee;!function(e){e.OK="OK",e.LOADING="LOADING",e.ERROR="ERROR"}(te||(te={}));var ce,se={status:te.LOADING,quotes:{}},le=c.createAsyncThunk("quotes/fetchQuotes",T(L.mark((function e(){return L.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled(Object.entries(M).map(function(){var e=T(L.mark((function e(t){var r,n,o,a;return L.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t[0],n=new URL("/"+t[1]+"/price.json",A),o=n.href,e.next=4,B(o);case 4:return a=Object.entries(e.sent).reduce((function(e,t){var r,n,o,a,u=t[1],i=null!=(r=null==(n=u.Long)?void 0:n.price)?r:0,c=null!=(o=null==(a=u.Short)?void 0:a.price)?o:0;return e[t[0]]={long:{price:i.toFixed(6),open:!!i},short:{price:c.toFixed(6),open:!!c}},e}),{}),e.abrupt("return",{chainId:Number(r),result:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent.reduce((function(e,t){return"fulfilled"!==t.status||(e[t.value.chainId]=t.value.result),e}),{}));case 4:case"end":return e.stop()}}),e)})))),fe=c.createSlice({name:"quotes",initialState:se,reducers:{},extraReducers:function(e){e.addCase(le.pending,(function(e){e.status=te.LOADING})).addCase(le.fulfilled,(function(e,t){var r=t.payload;e.status=te.OK,e.quotes=r})).addCase(le.rejected,(function(){return console.log("Unable to fetch quotes"),I({},se,{status:te.ERROR})}))}}).reducer;!function(e){e.OK="OK",e.LOADING="LOADING",e.ERROR="ERROR"}(ce||(ce={}));var pe={status:ce.LOADING,signatures:{}},de=c.createAsyncThunk("signatures/fetchSignatures",T(L.mark((function e(){return L.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled(Object.entries(M).map(function(){var e=T(L.mark((function e(t){var r,n,o,a;return L.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t[0],n=new URL("/"+t[1]+"/signatures.json",A),o=n.href,e.next=4,B(o);case 4:return a=e.sent,e.abrupt("return",{chainId:Number(r),result:a});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent.reduce((function(e,t){return"fulfilled"!==t.status||(e[t.value.chainId]=t.value.result),e}),{}));case 4:case"end":return e.stop()}}),e)})))),he=c.configureStore({reducer:{application:K,conducted:J,details:ee,fees:ae,quotes:fe,signatures:c.createSlice({name:"signatures",initialState:pe,reducers:{},extraReducers:function(e){e.addCase(de.pending,(function(e){e.status=ce.LOADING})).addCase(de.fulfilled,(function(e,t){var r=t.payload;e.status=ce.OK,e.signatures=r})).addCase(de.rejected,(function(){return console.log("Unable to fetch signatures"),I({},pe,{status:ce.ERROR})}))}}).reducer},middleware:function(e){return e({thunk:!0})}});s.setupListeners(he.dispatch);var ve=function(){return l.useDispatch()},me=l.useSelector;function ye(){return me((function(e){return e.fees}))}function ge(){var e=ye(),t=e.platformFee,r=e.partnerFee;return a.useCallback((function(e){return new f(t[e]).plus(r[e]).div(1e18)}),[t,r])}function xe(e,t){return e.ticker<t.ticker?-1:e.ticker>t.ticker?1:0}function be(e){var t=me((function(e){return e.conducted})).conducted,n=me((function(e){return e.quotes})).quotes,u=me((function(e){return e.signatures})).signatures,i=me((function(e){return e.details})).details,c=ge(),s=a.useMemo((function(){return[c(exports.Sector.STOCKS).toNumber(),c(exports.Sector.CRYPTO).toNumber(),c(exports.Sector.FOREX).toNumber()]}),[c]),l=s[0],f=s[1],p=s[2];return a.useMemo((function(){return e&&t[e]&&n[e]&&u[e]&&i?t[e].map((function(t){var a=t.id,c=t.long,s=t.short,d=n[e][a],h=u[e][c],v=u[e][s],m=i[a];if(!(m&&d&&d.long&&d.short))return null;var y=m.sector===exports.Sector.STOCKS?l:m.sector===exports.Sector.CRYPTO?f:p;return{id:a,long:{id:a,chainId:e,ticker:m.symbol,name:m.name,sector:m.sector,direction:exports.Direction.LONG,contract:o.getAddress(c),sibling:s,symbol:m.longSymbol,price:d.long.price,fee:q(y),open:!!h,token:new r.Token(e,o.getAddress(c),18,m.symbol,m.name)},short:{id:a,chainId:e,ticker:m.symbol,name:m.name,sector:m.sector,direction:exports.Direction.SHORT,contract:o.getAddress(s),sibling:c,symbol:m.shortSymbol,price:d.short.price,fee:q(y),open:!!v,token:new r.Token(e,o.getAddress(s),18,m.symbol,m.name)}}})).filter((function(e){return e})):[]}),[e,i,t,n,u,l,f,p])}function Oe(e){var t=be(e);return a.useMemo((function(){return t.reduce((function(e,t){return e.push.apply(e,[t.long,t.short]),e}),[]).sort(xe)}),[t])}var we=c.createAction("application/updateForceRefresh");function Se(){var e=ve();return a.useEffect((function(){e(z())}),[e]),null}function Re(){var e=ve();return a.useEffect((function(){e($())}),[e]),null}var Ee,ke=[{inputs:[{internalType:"address",name:"platform_",type:"address"},{internalType:"uint256[3]",name:"platformFee_",type:"uint256[3]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256[3]",name:"partnerFee",type:"uint256[3]"}],name:"PartnerAdded",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"stockFee",type:"uint256"},{internalType:"uint256",name:"cryptoFee",type:"uint256"},{internalType:"uint256",name:"forexFee",type:"uint256"}],name:"addPartner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isPartner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"partnerFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"platform",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"platformFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"scale",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Te=((Ee={})[exports.SupportedChainId.FANTOM]=new h.JsonRpcProvider("https://rpc.ftm.tools"),Ee);function Ie(e){var t=a.useMemo((function(){return e&&e in S?S[e]:S[250]}),[e]);return function(e,t,r){var n=function(e){return a.useMemo((function(){return e&&e in Te?Te[e]:Te[250]}),[e])}(e);return a.useMemo((function(){return new d.Contract(t,r,n)}),[t,r,n])}(e,t,ke)}var Ce=p.BigNumber.from("0"),Fe=[Ce,Ce,Ce];function Pe(e){var t=e.chainId,r=e.partnerId,n=ve(),o=Ie(t),u=a.useState(Fe),i=u[0],c=u[1],s=a.useState(Fe),l=s[0],f=s[1],p=a.useMemo((function(){return!!t&&Object.values(b).includes(t)}),[t]),d=a.useMemo((function(){return p?[[r,0],[r,1],[r,2]]:[]}),[p,r]),h=a.useMemo((function(){return p?[0,1,2]:[]}),[p]);return a.useEffect((function(){var e=function(){var e=T(L.mark((function e(){var t;return L.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(d.map((function(e){return o.partnerFee.apply(o,e)})));case 3:(t=e.sent).length&&c(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Unable to fetch PartnerFees: ",e.t0),c(Fe);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();o&&d.length&&e()}),[d,o]),a.useEffect((function(){var e=function(){var e=T(L.mark((function e(){var t;return L.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(h.map((function(e){return o.platformFee(e)})));case 3:(t=e.sent).length&&f(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Unable to fetch PlatformFees: ",e.t0),c(Fe);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();o&&h.length&&e()}),[h,o]),a.useEffect((function(){var e,t,r,o,a,u,c=i[0],s=i[1],f=i[2],p=l[0],d=l[1],h=l[2];c&&n(ie(((e={})[exports.Sector.STOCKS]=c.toString(),e))),s&&n(ie(((t={})[exports.Sector.CRYPTO]=s.toString(),t))),f&&n(ie(((r={})[exports.Sector.FOREX]=f.toString(),r))),p&&n(ue(((o={})[exports.Sector.STOCKS]=p.toString(),o))),d&&n(ue(((a={})[exports.Sector.CRYPTO]=d.toString(),a))),h&&n(ue(((u={})[exports.Sector.FOREX]=h.toString(),u)))}),[n,l,i]),null}function Le(){var e=ve(),t=U().forceRefresh;return a.useEffect((function(){var t=setInterval((function(){return e(le())}),6e4);return e(le()),function(){return clearInterval(t)}}),[e]),a.useEffect((function(){t&&(console.info("Forcing a quote refresh"),e(le()))}),[t]),null}function Ae(){var e=ve(),t=U().forceRefresh;return a.useEffect((function(){e(de())}),[e]),a.useEffect((function(){t&&(console.info("Forcing a signatures refresh"),e(de()))}),[t]),null}function Me(e){var t=e.chainId,r=e.partnerId;return u.createElement(u.Fragment,null,u.createElement(Se,null),u.createElement(Re,null),u.createElement(Pe,{chainId:t,partnerId:r}),u.createElement(Le,null),u.createElement(Ae,null))}var Ne={Collateral:O,Conductor:R,PartnerManager:S,RoleChecker:E,Synchronizer:w};Object.defineProperty(exports,"Percent",{enumerable:!0,get:function(){return r.Percent}}),Object.defineProperty(exports,"Token",{enumerable:!0,get:function(){return r.Token}}),exports.MuonClient=G,exports.SynchronizerProvider=function(e){var t=e.children;return u.createElement(l.Provider,{store:he},u.createElement(u.Fragment,null,u.createElement(Me,{chainId:e.chainId,partnerId:e.partnerId}),t))},exports.addresses=Ne,exports.useForceRefreshCallback=function(){var e=U().forceRefresh,t=ve();return a.useCallback((function(){t(we(e+1))}),[t,e,we])},exports.usePartnerFeeCallback=function(){var e=ye().partnerFee;return a.useCallback((function(t){return new f(e[t]).div(1e18)}),[e])},exports.usePlatformFeeCallback=function(){var e=ye().platformFee;return a.useCallback((function(t){return new f(e[t]).div(1e18)}),[e])},exports.useRegistrarByContract=function(e,t){var r=Oe(t);return a.useMemo((function(){if(e){var t=i.find(r,(function(t){return t.contract.toUpperCase()===e.toUpperCase()}));return null!=t?t:void 0}}),[e,r])},exports.useRegistrarPairs=be,exports.useRegistrarTokenMap=function(e){var t=Oe(e);return a.useMemo((function(){return t.reduce((function(e,t){return e[t.contract]=t.token,e}),{})}),[t])},exports.useRegistrarTokens=function(e){var t=Oe(e);return a.useMemo((function(){return t.map((function(e){return e.token}))}),[t])},exports.useRegistrars=Oe,exports.useTotalFeeCallback=ge;
//# sourceMappingURL=synchronizer-sdk.cjs.production.min.js.map
